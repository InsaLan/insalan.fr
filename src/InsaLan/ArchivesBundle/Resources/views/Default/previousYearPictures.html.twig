{% extends 'InsaLanArchivesBundle::layout.html.twig' %}

{% block stylesheets %}
{{ parent() }}
{% stylesheets 'bundles/insalan/css/archives.css' %}
<link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}
{% stylesheets 'bundles/insalan/css/tournament.css' filter='cssrewrite' %}
<link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}
{% endblock %}

{% block body %}
{{ parent() }}

<header>
  <h1 style="text-align:center; font-size:40px; margin-top: 18px">Ann√©e {{year}}</h1>
</header>

<br/><hr/><br/>

{% if pictures is not empty %}
<article class="info">
  <aside>
    <div class="square">
      <a href="{{ path('insalan_archives_default_previousyear', {'year': year}) }}"><span></span></a>
    </div>
  </aside>

  <header>
    <h2>Photos - {{ album }}</h2>
  </header>

  <section>
    <div class="picture-list ">
      {% set nbPictures = 50 %}
      {% for p in pictures|slice((page - 1) * nbPictures, page * nbPictures)  %}

      <div class="picture">
        <a href="{{ asset(p.getUploadDir() ~ p.path)  }}" target="_blank">
          <img src="{{ asset(p.getUploadDir() ~ p.path)  }}" alt="{{ p.name }}"/>
        </div>
        {% endfor %}
      </div>
    </section>
  </article>
  {% endif %}

  <br/><hr/><br/>
  {% set pageMax = ((pictures|length) / nbPictures)|round(0, 'ceil') %}
  {% if pageMax > page %}
    <a href="{{ path('archives_pictures', {'year': year, 'album': album, 'page': page + 1}) }}" class="btn2 pull-right" style="margin-left: 10px;">Suivant</a>
  {% endif %}
  {% for i in (min(pageMax, page + 5))..(max(1, (pageMax - 5))) %}
    {% if i == page %}
      <a href="{{ path('archives_pictures', {'year': year, 'album': album, 'page': i}) }}" class="btn2 pull-right" style="margin-left: 10px;">{{i}}</a>
    {% else %}
      <a href="{{ path('archives_pictures', {'year': year, 'album': album, 'page': i}) }}" class="btn2 btn2-nocolor pull-right" style="margin-left: 10px;">{{i}}</a>
    {% endif %}
  {% endfor %}

{% endblock %}
