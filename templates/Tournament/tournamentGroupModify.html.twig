{% extends 'Admin/adminLayout.html.twig' %}

{% block title %}
{{ parent() }}
{% endblock %}

{% block body %}
{{ parent() }}

<article>
  <header>
    <h2>Gestion des Poules</h2>
  </header>

  {{ form_start(form) }}
  {{ form_row(form.name) }}
  {{ form_row(form.stage) }}
  <div class="input left">
    <div>
      Maintenir la touche Ctrl enfoncée pour sélectionner plusieurs joueurs<br>
      Appuyer sur Shift pour sélectionner une série de joueurs adjacents dans la liste
    </div>
    <label>Filtre</label>
    <input type="text" placeholder="Filtrer joueurs..." id="dropdown-search" onkeyup="filter()"/>
  </div>
  {{ form_row(form.participants) }}
  {{ form_row(form.statsType) }}
  {{ form_row(form.save) }}
  {{ form_end(form) }}
</article>

<style>
  .input select[multiple] {
    height: auto;
  }
</style>

<script>
  // Events
  function filter() {
    const input = document.getElementById("dropdown-search").value.toLowerCase();
    const options = document.getElementById('form_participants').getElementsByTagName('option');

    for (let i = 0; i < options.length; i++) {
      let option = options[i];
      let txtValue = option.textContent || option.innerText;
      if (txtValue.toLowerCase().indexOf(input) > -1) {
        option.style.display = "";
      } else {
        option.style.display = "none";
      }
    }
  }
</script>
{% endblock %}
